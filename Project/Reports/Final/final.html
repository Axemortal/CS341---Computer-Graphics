<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="generator" content="pandoc">
    <meta name="description" content="">

    <title>Final Project Report CS-341 2025</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <link href="ie10-viewport-bug-workaround.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/dashboard.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style type="text/css">code{white-space: pre;}</style>
    <style type="text/css">.sidebar ul{padding-left: 10px;}</style>
    <link rel="stylesheet" href="css/cg_report.css" />
  </head>

  <body>

    <div class="container-fluid">
      <div class="row">
        <div id="sidebar" class="col-sm-3 col-md-2 sidebar">
          <!--<ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
          </ul>-->
          <ul>
          <li><a
          href="#cyberpunk-city-a-dynamically-evolving-urban-landscape"
          id="toc-cyberpunk-city-a-dynamically-evolving-urban-landscape">Cyberpunk
          City: A Dynamically Evolving Urban Landscape</a>
          <ul>
          <li><a href="#abstract" id="toc-abstract">Abstract</a></li>
          <li><a href="#overview" id="toc-overview">Overview</a></li>
          <li><a href="#feature-validation"
          id="toc-feature-validation">Feature validation</a>
          <ul>
          <li><a href="#runtime-evolving-bloom-effects-on-billboards"
          id="toc-runtime-evolving-bloom-effects-on-billboards">Runtime-evolving
          bloom effects on billboards</a></li>
          <li><a href="#dynamic-billboard-texture-generation-with-noise"
          id="toc-dynamic-billboard-texture-generation-with-noise">Dynamic
          billboard texture generation with noise</a></li>
          <li><a href="#wave-function-collapse-wfc"
          id="toc-wave-function-collapse-wfc">Wave Function Collapse
          (WFC)</a></li>
          <li><a href="#screen-space-reflections-ssr"
          id="toc-screen-space-reflections-ssr">Screen-Space Reflections
          (SSR)</a></li>
          </ul></li>
          <li><a href="#discussion" id="toc-discussion">Discussion</a>
          <ul>
          <li><a href="#additional-components"
          id="toc-additional-components">Additional Components</a></li>
          <li><a href="#failed-experiments"
          id="toc-failed-experiments">Failed Experiments</a></li>
          <li><a href="#challenges"
          id="toc-challenges">Challenges</a></li>
          </ul></li>
          <li><a href="#contributions"
          id="toc-contributions">Contributions</a></li>
          <li><a href="#references"
          id="toc-references">References</a></li>
          </ul></li>
          </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        
<h1 id="cyberpunk-city-a-dynamically-evolving-urban-landscape">Cyberpunk
City: A Dynamically Evolving Urban Landscape</h1>
<div>
<video src="videos/demo_teaser.mp4" height="300px" autoplay loop>
</video>
</div>
<figcaption style="text-align: center;">
A short teaser video, gif, or image showing an overview of the final
result.
</figcaption>
<h2 id="abstract">Abstract</h2>
<p>This project presents an immersive, ever-evolving cyberpunk city. Key
features include stylized 3D buildings via Wave Function Collapse (WFC),
realistic water reflections using Screen-Space Reflections (SSR), and
animated billboards with dynamic textures and bloom effects. These
components combine to create a vibrant, self-evolving urban landscape
that draws users into a futuristic cyberpunk world.</p>
<h2 id="overview">Overview</h2>
<div
style="display: flex; justify-content: space-around; align-items: center;">
<div>
<p><img src="images/demo_detail.png" height="210px" style="vertical-align: middle;"></p>
</div>
<div>
<video src="videos/demo_detail.mp4" height="210px" autoplay loop style="vertical-align: middle;">
</video>
</div>
</div>
<figcaption style="text-align: center;">
Some more visuals focusing on interesting details of your scene.
</figcaption>
<p>TODO</p>
<h2 id="feature-validation">Feature validation</h2>
<table>
<caption>
Feature Summary
</caption>
<thead>
<tr>
<th>
Feature
</th>
<th>
Adapted Points
</th>
<th>
Status
</th>
</tr>
</thead>
<!-- <td style="background-color: #cce5ff;">Missing</td> -->
<!-- <td style="background-color: #e8ebca;">Partially Completed</td> -->
<tbody>
<tr>
<td>
Runtime-evolving bloom effects on billboards
</td>
<td>
5
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
Dynamic billboard texture generation with noise
</td>
<td>
10
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
Wave Function Collapse (WFC)
</td>
<td>
15
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
<tr>
<td>
Screen-Space Reflections (SSR)
</td>
<td>
20
</td>
<td style="background-color: #d4edda;">
Completed
</td>
</tr>
</tbody>
</table>
<h3 id="runtime-evolving-bloom-effects-on-billboards">Runtime-evolving
bloom effects on billboards</h3>
<h4 id="implementation">Implementation</h4>
<p>TODO</p>
<h4 id="validation">Validation</h4>
<p>TODO</p>
<h3 id="dynamic-billboard-texture-generation-with-noise">Dynamic
billboard texture generation with noise</h3>
<h4 id="implementation-1">Implementation</h4>
<p>TODO</p>
<h4 id="validation-1">Validation</h4>
<p>TODO</p>
<h3 id="wave-function-collapse-wfc">Wave Function Collapse (WFC)</h3>
<h4 id="implementation-2">Implementation</h4>
<p>TODO</p>
<h4 id="validation-2">Validation</h4>
<p>TODO</p>
<h3 id="screen-space-reflections-ssr">Screen-Space Reflections
(SSR)</h3>
<h4 id="implementation-3">Implementation</h4>
<p>For a more in-depth explanation, please refer to the <a
href="#references">SSR Guide by David Lettier</a>, which served as the
primary inspiration for this feature’s implementation.</p>
<p>Our approach follows these main steps:</p>
<ol type="1">
<li><strong>Render the base image</strong> without any reflections or
shadows into a texture.</li>
<li><strong>Generate a reflection map</strong> to determine which points
in the base texture should be sampled for reflections. This involves:
<ol type="a">
<li>Calculating the position, normal, and reflection vector for each
point on a reflective surface.</li>
<li>Using the position and reflection vector to determine the start and
end points for ray marching.</li>
<li>Converting these coordinates into screen space for performance
efficiency, as ray marching in screen space reduces redundant
sampling.</li>
<li>Performing ray marching, with a sampling rate defined by a
resolution factor.</li>
<li>Recording hits by checking whether any scene geometry is
sufficiently close to the sampled points along the reflection ray.</li>
<li>Refining the hit point to accurately determine where to sample the
reflection color.</li>
<li>Applying fade factors based on edge proximity, distance from the
reflection plane, and other conditions to create a more natural
reflection effect.</li>
</ol></li>
<li><strong>Sample reflection colors</strong> from the base texture
using the UV indices generated from the ray-marched hits. We also fill
in gaps between sample points to reduce visual noise in the
reflection.</li>
<li><strong>Apply a blur</strong> to the sampled reflection colors and
store the result in a separate texture.</li>
<li><strong>Combine everything</strong> to produce the final reflection
output by blending the base image with both the original and blurred
reflection textures, using weighting factors for a smooth and realistic
result.</li>
</ol>
<h4 id="validation-3">Validation</h4>
<div
style="display: flex; justify-content: space-around; align-items: center;">
<div>
<p><img src="images/ssr_reflection_uv.png" height="210px" style="vertical-align: middle;"></p>
</div>
</div>
<figcaption style="text-align: center;">
Visualised UV coordinates sampled for SSR
</figcaption>
<div
style="display: flex; justify-content: space-around; align-items: center;">
<div>
<p><img src="images/ssr_validation_1.png" height="210px" style="vertical-align: middle;"></p>
</div>
<div>
<p><img src="images/ssr_validation_2.png" height="210px" style="vertical-align: middle;"></p>
</div>
</div>
<figcaption style="text-align: center;">
Validating SSR implementation on sample scene
</figcaption>
<div
style="display: flex; justify-content: space-around; align-items: center;">
<div>
<p><img src="images/ssr_validation_final.png" height="210px" style="vertical-align: middle;"></p>
</div>
</div>
<figcaption style="text-align: center;">
Final integration of SSR into the complete project scene
</figcaption>
<h2 id="discussion">Discussion</h2>
<h3 id="additional-components">Additional Components</h3>
<p>TODO</p>
<h3 id="failed-experiments">Failed Experiments</h3>
<p>TODO</p>
<h3 id="challenges">Challenges</h3>
<p>At the start, navigating the codebase was quite challenging, even
with the existing guide. To improve clarity and consistency for the
entire team, we carried out a major refactor of the codebase —
introducing standardized naming conventions and a unified structure for
handling vertex and fragment shaders.</p>
<p>In particular, we streamlined the use of vertex shaders by
consolidating repeated versions into a single, reusable shader
(<code>pass_through.vert.glsl</code>), reducing redundancy across
different shader renderers.</p>
<p>Furthermore, to streamline the debugging process, we rendered many of
the computer-generated images to textures, allowing us to directly
choose which texture to render to. This made it much easier to inspect
specific texture layers and directly debug individual shader
renderers.</p>
<h2 id="contributions">Contributions</h2>
<table>
<caption>
Worked hours
</caption>
<thead>
<tr>
<th>
Name
</th>
<th>
Week 1
</th>
<th>
Week 2
</th>
<th>
Week 3
</th>
<th>
Week 4
</th>
<th>
Week 5
</th>
<th>
Week 6
</th>
<th>
Week 7
</th>
<th>
Total
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Eunice Lee (402359)
</td>
<td>
2
</td>
<td style="background-color: #f0f0f0;">
5
</td>
<td>
4
</td>
<td>
4
</td>
<td>
6
</td>
<td>
6
</td>
<td>
8
</td>
<td>
35
</td>
</tr>
<tr>
<td>
Howell Chan (402360)
</td>
<td>
2
</td>
<td style="background-color: #f0f0f0;">
5
</td>
<td>
6
</td>
<td>
6
</td>
<td>
6
</td>
<td>
6
</td>
<td>
6
</td>
<td>
37
</td>
</tr>
<tr>
<td>
Yifan Wu (402391)
</td>
<td>
0
</td>
<td style="background-color: #f0f0f0;">
20
</td>
<td>
4
</td>
<td>
4
</td>
<td>
4
</td>
<td>
2
</td>
<td>
2
</td>
<td>
36
</td>
</tr>
</tbody>
</table>
<table>
<caption>
Individual contributions
</caption>
<thead>
<tr>
<th>
Name
</th>
<th>
Contribution
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
Eunice Lee (402359)
</td>
<td>
1/3
</td>
</tr>
<tr>
<td>
Howell Chan (402360)
</td>
<td>
1/3
</td>
</tr>
<tr>
<td>
Yifan Wu (402391)
</td>
<td>
1/3
</td>
</tr>
</tbody>
</table>
<h4 id="comments">Comments</h4>
<p>For this project:</p>
<ul>
<li>Eunice focused on generating dynamic textures using noise and
contributed to integrating the final scene.</li>
<li>Howell implemented dynamic building generation using <strong>Wave
Function Collapse</strong> and also worked on integrating the final
scene.</li>
<li>Yifan refactored the initial codebase to ensure a consistent and
unified implementation, and developed the <strong>Screen-Space
Reflection Feature</strong>.</li>
</ul>
<h2 id="references">References</h2>
<ul>
<li><a
href="https://github.com/lettier/3d-game-shaders-for-beginners/blob/master/sections/screen-space-reflection.md">SSR
Guide by David Lettier</a></li>
</ul>
        </div>
      </div>
    </div>
    
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
    <script>
        //document.getElementById('sidebar').getElementsByTagName('ul')[0].className += "nav nav-sidebar";
        
        /* ajust the height when click the toc
           the code is from https://github.com/twbs/bootstrap/issues/1768
        */
        var shiftWindow = function() { scrollBy(0, -50) };
        window.addEventListener("hashchange", shiftWindow);
        function load() { if (window.location.hash) shiftWindow(); }
        
        /*add Bootstrap styles to tables*/
        var tables = document.getElementsByTagName("table");
        for(var i = 0; i < tables.length; ++i){
            tables[i].className += "table table-bordered table-hover";
        }
    </script>
  </body>
</html>
